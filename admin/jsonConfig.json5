{
	"i18n": true,
	"type": "tabs",
	"items": {
		// Main Page and generic Setting of Adapter & ESPHome Dashboard
		"_options": {
			"type": "panel",
			"label": "Main settings",
			"items": {
				// Header ESPHome
				"headerESPHomeDashboard": {
					"type": "header",
					"text": "lblHeaderMainpage",
					"size": 1
				},
				// Introduction text
				"introLine-1": {
					"type": "staticText",
					"text": "introLine-1"
				},
				"introLine-2": {
					"newLine": true,
					"type": "staticText",
					"text": "introLine-2"
				},

				"emptyLine-1": {
					"newLine": true,
					"type": "staticText",
					"text": ""
				},

				// Mentioning & link to ESPHome project
				"headerESPHomeDashboard-details-3": {
					"newLine": true,
					"type": "staticText",
					"text": "ESPHomeCommunityLink"
				},
				"headerESPHomeDashboard-details-Link": {
					"type": "staticLink",
					"label": "esphome.io",
					"href" : "https://esphome.io/"
				},
				"emptyLine-2": {
					"newLine": true,
					"type": "staticText",
					"text": ""
				},

				// ESPHome Dashboard Explanation
				"headerESPHomeDashboard-details-4": {
					"newLine": true,
					"type": "staticText",
					"text": "lblEnableESPHome"
				},

				// ESPHome Dashboard configuration
				"ESPHomeDashboardEnabled": {
					"newLine": true,
					"type": "checkbox",
					"sm": 2,
					"md": 2,
					"lg": 2,
					"label": "chkEnableESPHome"
				},
				"ESPHomeDashboardIP": {
					"type": "text",
					"text": "",
					"sm": 3,
					"label": "lblESPHomeIP"
				},
				"ESPHomeDashboardPort": {
					"type": "text",
					"text": "",
					"sm": 1,
					"readOnly" : true,
					"label": "lblESPHomePort"
				},

				// Explanation usage of IP-Address input field
				"headerESPHomeDashboard-details-5": {
					"newLine": true,
					"type": "staticText",
					"text": "lblDashboardLink"
				},

				// Some empty lines to move next head a little down
				"emptyLine-3": {
					"newLine": true,
					"type": "staticText",
					"text": ""
				},
				"emptyLine-4": {
					"newLine": true,
					"type": "staticText",
					"text": ""
				},
				"emptyLine-5": {
					"newLine": true,
					"type": "staticText",
					"text": ""
				},

				// Header ESPHome communication details
				"howToConnect": {
					"type": "header",
					"text": "lblHeaderConnect",
					"size": 1
				},

				// Lines of text with details
				"headerhowToConnect-details-1": {
					"newLine": true,
					"type": "staticText",
					"text": "lblConnectDetails-Line-1"
				},

				"headerhowToConnect-details-2": {
					"newLine": true,
					"type": "staticText",
					"text": "lblConnectDetails-Line-2"
				},
				"headerhowToConnect-details-3": {
					"newLine": true,
					"type": "staticText",
					"text": "lblConnectDetails-Line-3"
				},

				// Mention & link to api.proto project
				"headerESPHomeDashboard-details-api.proto": {
					"type": "staticLink",
					"label": "api.proto",
					"href" : "https://github.com/esphome/esphome/blob/dev/esphome/components/api/api.proto"
				},

				"emptyLine-6": {
					"newLine": true,
					"type": "staticText",
					"text": ""
				},

				// Text explaining ioBroker integration
				"headerHowToConnect-details-3": {
					"newLine": true,
					"type": "staticText",
					"text": "lblConnectIobroker"
				},

				"emptyLine-7": {
					"newLine": true,
					"type": "staticText",
					"text": ""
				},
				"emptyLine-8": {
					"newLine": true,
					"type": "staticText",
					"text": ""
				},

				// Header default credentials
				"defaultCredentials": {
					"type": "header",
					"text": "lblDefaultCredentials",
					"size": 1
				},

				// Explanation of usage and warning
				"headerdefaultCredentials-details-1": {
					"newLine": true,
					"type": "staticText",
					"text": "lblDefaultCredentials-Line-1"
				},
				"headerdefaultCredentials-details-2": {
					"newLine": true,
					"type": "staticText",
					"text": "lblDefaultCredentials-Line-2"
				},

				// Credentials which will be stored (encrypted) in adapter config object
				"encryptionKey": {
					"newLine": true,
					"type": "password",
					"label": "lblEncryptionKey",
					"sm": 3
				},
				"apiPass": {
					"type": "password",
					"label": "lblApiPass",
					"sm": 2
				}
			}
		},

		// Tab devices
		"devices": {
			"type": "panel",
			"label": "Devices",
			"items": {

				// Enable/disable autodiscovery and store setting in adapter config object
				"autodiscovery": {
					"newLine": true,
					"type": "checkbox",
					"sm": 12,
					"md": 2,
					"label": "lblAutoDiscovery"
				},

				// Refresh table showing all devices
				// Sends message to backend to get all current known devices, their configuration and connection status
				"loadDevices": {
					"type": "sendTo",
					"hidden": "!_alive",
					"command": "loadDevices",
					"jsonData": "{ \"service\": \"template\"}",
					"label": "lblLoadDevices",
					"tooltip": "restoreDefaultToolTip",
					"useNative": true,
					"xs": 2,
					"sm": 2,
					"md": 2,
					"lg": 2
				},

				// Text to explain adapter must be running to load this table
				"details-1": {
					"type": "staticText",
					"text": "lblTxtNoButtonsIfNotActive",
					"hidden": "_alive"
				},

				// Input fields to ADD / Modify devices
				"deviceIP": {
					"newLine": true,
					"type": "autocompleteSendTo",
					"command": "getDeviceIPs",
					"jsonData": "{ \"service\": \"${data.deviceInputIP}\" }",
					"xs": 3,
					"sm": 3,
					"md": 3,
					"lg": 3,
					"label": "lblInputDeviceIP",
					"tooltip": "TypeFilter"
				},
				"encryptionKey": {
					"type": "password",
					"label": "lblInputEncryptionKey",
					"doNotSave": true,
					"default": "",
					"tooltip": "ttCloudPassword",
					"help": "hlpCloudPassword",
					"xs": 2,
					"sm": 2,
					"md": 2,
					"lg": 2
				},
				"apiPassword": {
					"type": "password",
					"label": "lblInputApiPassword",
					"doNotSave": true,
					"default": "",
					"tooltip": "ttCloudPassword",
					"help": "hlpCloudPassword"
				},

				// Button do ADD / Modify devices, sends
				// Sends device IP and credentials to backend
				"_addUpdateDevice": {
					"type": "sendTo",
					"label": "lbl_addUpdateDevice",
					"variant": "outlined",
					"showProcess" : true,
					"command": "_addUpdateDevice",
					"jsonData": "{ \"ip\": \"${data.deviceIP}\", \"encryptionKey\": \"${data.encryptionKey}\", \"apiPassword\": \"${data.apiPassword}\" }",
					"useNative": true,
					"disabled": "data.deviceIP===''",
					"hidden": "!_alive",
					"tooltip": "ttGetStationId",
					"help": "hlpGetStationId"
				},

				"deleteDevice": {
					"type": "sendTo",
					"label": "lblDelDevice",
					"variant": "outlined",
					"showProcess" : true,
					"command": "deleteDevice",
					"jsonData": "{ \"ip\": \"${data.deviceIP}\"}",
					"useNative": true,
					"hidden": "!_alive",
					"tooltip": "ttGetStationId",
					"help": "hlpGetStationId"
				},

				// Table (provided by backend) of all devices and their connection status
				"templateTable": {
					"type": "table",
					"noDelete": true,
					"newLine": true,
					"xs": 12,
					"sm": 12,
					"md": 5,
					"lg": 12,
					"hidden": "data._templateTable[0].template == 'template.NewMessage'",
					"label": "lblDevicesTable",
					"showSecondAddAt": 5,
					"items": [
						{
							"type": "text",
							"readOnly" : true,
							"attr": "MACAddress",
							"width": "15% ",
							"title": "MAC-Address",
							"tooltip": "templateKeyTip",
							"filter": false,
							"sort": false,
							"default": "",
							"validatorNoSaveOnError": true
						},
						{
							"type": "text",
							"readOnly" : true,
							"attr": "deviceName",
							"width": "15% ",
							"title": "Device Name",
							"tooltip": "templateKeyTip",
							"filter": false,
							"sort": false,
							"default": "",
							"validatorNoSaveOnError": true
						},
						{
							"type": "text",
							"attr": "ip",
							"readOnly" : true,
							"width": "15% ",
							"title": "IP Address",
							"tooltip": "templateKeyTip",
							"filter": false,
							"sort": false,
							"default": "",
//							"validator": "const x={};for (const c of globalData.templateTable) {if (x[c.templateKey]==='x') return false; x[c.templateKey]='x';}; return true;",
							"validatorNoSaveOnError": true
						},
						{
							"type": "text",
							"readOnly" : true,
							"attr": "connectState",
							"width": "15% ",
							"title": "Connection Status",
							"tooltip": "templateKeyTip",
							"filter": false,
							"sort": false,
							"default": "",
							"validatorNoSaveOnError": true
						}

					]
				}
			}
		},
		"ignoreList": {
			"type": "panel",
			"label": "Ignore List",
			"items": {}
		}
	}
}